
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<title>CMake module FortranCInterface</title>
<link href="../cmake.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div><b>CMake 2.8.0</b></div>
<div class="ContentTxtProd">
<ul>
  <li>
    <a name="single_item:FortranCInterface"><b><code>FortranCInterface</code></b></a>: Fortran/C Interface Detection<br>
    <p>This module automatically detects the API by which C and Fortran languages interact.  Variables indicate if the mangling is found:<br><pre>   FortranCInterface_GLOBAL_FOUND = Global subroutines and functions<br>   FortranCInterface_MODULE_FOUND = Module subroutines and functions<br>                                    (declared by "MODULE PROCEDURE")<br></pre>
    <p>A function is provided to generate a C header file containing macros to mangle symbol names:<br><pre>   FortranCInterface_HEADER(&lt;file&gt;<br>                            [MACRO_NAMESPACE &lt;macro-ns&gt;]<br>                            [SYMBOL_NAMESPACE &lt;ns&gt;]<br>                            [SYMBOLS [&lt;module&gt;:]&lt;function&gt; ...])<br></pre>
    <p>It generates in &lt;file&gt; definitions of the following macros:<br><pre>   #define FortranCInterface_GLOBAL (name,NAME) ...<br>   #define FortranCInterface_GLOBAL_(name,NAME) ...<br>   #define FortranCInterface_MODULE (mod,name, MOD,NAME) ...<br>   #define FortranCInterface_MODULE_(mod,name, MOD,NAME) ...<br></pre>
    <p>These macros mangle four categories of Fortran symbols, respectively:<br><pre>   - Global symbols without '_': call mysub()<br>   - Global symbols with '_'   : call my_sub()<br>   - Module symbols without '_': use mymod; call mysub()<br>   - Module symbols with '_'   : use mymod; call my_sub()<br></pre>
    <p>If mangling for a category is not known, its macro is left undefined. All macros require raw names in both lower case and upper case. The MACRO_NAMESPACE option replaces the default "FortranCInterface_" prefix with a given namespace "&lt;macro-ns&gt;".<br><p>The SYMBOLS option lists symbols to mangle automatically with C preprocessor definitions:<br><pre>   &lt;function&gt;          ==&gt; #define &lt;ns&gt;&lt;function&gt; ...<br>   &lt;module&gt;:&lt;function&gt; ==&gt; #define &lt;ns&gt;&lt;module&gt;_&lt;function&gt; ...<br></pre>
    <p>If the mangling for some symbol is not known then no preprocessor definition is created, and a warning is displayed. The SYMBOL_NAMESPACE option prefixes all preprocessor definitions generated by the SYMBOLS option with a given namespace "&lt;ns&gt;".<br><p>Example usage:<br><pre>   include(FortranCInterface)<br>   FortranCInterface_HEADER(FC.h MACRO_NAMESPACE "FC_")<br></pre>
    <p>This creates a "FC.h" header that defines mangling macros FC_GLOBAL(), FC_GLOBAL_(), FC_MODULE(), and FC_MODULE_().<br><p>Example usage:<br><pre>   include(FortranCInterface)<br>   FortranCInterface_HEADER(FCMangle.h<br>                            MACRO_NAMESPACE "FC_"<br>                            SYMBOL_NAMESPACE "FC_"<br>                            SYMBOLS mysub mymod:my_sub)<br></pre>
    <p>This creates a "FC.h" header that defines the same FC_*() mangling macros as the previous example plus preprocessor symbols FC_mysub and FC_mymod_my_sub.<br><p>Another function is provided to verify that the Fortran and C/C++ compilers work together:<br><pre>   FortranCInterface_VERIFY([CXX] [QUIET])<br></pre>
    <p>It tests whether a simple test executable using Fortran and C (and C++ when the CXX option is given) compiles and links successfully. The result is stored in the cache entry FortranCInterface_VERIFIED_C (or FortranCInterface_VERIFIED_CXX if CXX is given) as a boolean. If the check fails and QUIET is not given the function terminates with a FATAL_ERROR message describing the problem.  The purpose of this check is to stop a build early for incompatible compiler combinations.<br><p>FortranCInterface is aware of possible GLOBAL and MODULE manglings for many Fortran compilers, but it also provides an interface to specify new possible manglings.  Set the variables<br><pre>   FortranCInterface_GLOBAL_SYMBOLS<br>   FortranCInterface_MODULE_SYMBOLS<br></pre>
    <p>before including FortranCInterface to specify manglings of the symbols "MySub", "My_Sub", "MyModule:MySub", and "My_Module:My_Sub". For example, the code:<br><pre>   set(FortranCInterface_GLOBAL_SYMBOLS mysub_ my_sub__ MYSUB_)<br>     #                                  ^^^^^  ^^^^^^   ^^^^^<br>   set(FortranCInterface_MODULE_SYMBOLS<br>       __mymodule_MOD_mysub __my_module_MOD_my_sub)<br>     #   ^^^^^^^^     ^^^^^   ^^^^^^^^^     ^^^^^^<br>   include(FortranCInterface)<br></pre>
    <p>tells FortranCInterface to try given GLOBAL and MODULE manglings. (The carets point at raw symbol names for clarity in this example but are not needed.)
  </li>
</ul>

       Defined in: /Users/Shared/Toolkits/CMake-2.8.0/share/cmake-2.8/Modules/FortranCInterface.cmake
</div></body></html>
