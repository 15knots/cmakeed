
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<title>CMake module ExternalProject</title>
<link href="../cmake.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div><b>CMake 2.8.6</b></div>
<div class="ContentTxtProd">
<ul>
  <li>
    <a name="single_item:ExternalProject"><b><code>ExternalProject</code></b></a>: Create custom targets to build projects in external trees<br />
    <p>The 'ExternalProject_Add' function creates a custom target to drive download, update/patch, configure, build, install and test steps of an external project:<br /></p>
<pre>  ExternalProject_Add(&lt;name&gt;    # Name for custom target<br />    [DEPENDS projects...]       # Targets on which the project depends<br />    [PREFIX dir]                # Root dir for entire project<br />    [LIST_SEPARATOR sep]        # Sep to be replaced by ; in cmd lines<br />    [TMP_DIR dir]               # Directory to store temporary files<br />    [STAMP_DIR dir]             # Directory to store step timestamps<br />   #--Download step--------------<br />    [DOWNLOAD_DIR dir]          # Directory to store downloaded files<br />    [DOWNLOAD_COMMAND cmd...]   # Command to download source tree<br />    [CVS_REPOSITORY cvsroot]    # CVSROOT of CVS repository<br />    [CVS_MODULE mod]            # Module to checkout from CVS repo<br />    [CVS_TAG tag]               # Tag to checkout from CVS repo<br />    [SVN_REPOSITORY url]        # URL of Subversion repo<br />    [SVN_REVISION rev]          # Revision to checkout from Subversion repo<br />    [SVN_USERNAME john ]        # Username for Subversion checkout and update<br />    [SVN_PASSWORD doe ]         # Password for Subversion checkout and update<br />    [SVN_TRUST_CERT 1 ]         # Trust the Subversion server site certificate<br />    [GIT_REPOSITORY url]        # URL of git repo<br />    [GIT_TAG tag]               # Git branch name, commit id or tag<br />    [URL /.../src.tgz]          # Full path or URL of source<br />    [URL_MD5 md5]               # MD5 checksum of file at URL<br />    [TIMEOUT seconds]           # Time allowed for file download operations<br />   #--Update/Patch step----------<br />    [UPDATE_COMMAND cmd...]     # Source work-tree update command<br />    [PATCH_COMMAND cmd...]      # Command to patch downloaded source<br />   #--Configure step-------------<br />    [SOURCE_DIR dir]            # Source dir to be used for build<br />    [CONFIGURE_COMMAND cmd...]  # Build tree configuration command<br />    [CMAKE_COMMAND /.../cmake]  # Specify alternative cmake executable<br />    [CMAKE_GENERATOR gen]       # Specify generator for native build<br />    [CMAKE_ARGS args...]        # Arguments to CMake command line<br />    [CMAKE_CACHE_ARGS args...]  # Initial cache arguments, of the form -Dvar:string=on<br />   #--Build step-----------------<br />    [BINARY_DIR dir]            # Specify build dir location<br />    [BUILD_COMMAND cmd...]      # Command to drive the native build<br />    [BUILD_IN_SOURCE 1]         # Use source dir for build dir<br />   #--Install step---------------<br />    [INSTALL_DIR dir]           # Installation prefix<br />    [INSTALL_COMMAND cmd...]    # Command to drive install after build<br />   #--Test step------------------<br />    [TEST_BEFORE_INSTALL 1]     # Add test step executed before install step<br />    [TEST_AFTER_INSTALL 1]      # Add test step executed after install step<br />    [TEST_COMMAND cmd...]       # Command to drive test<br />   #--Output logging-------------<br />    [LOG_DOWNLOAD 1]            # Wrap download in script to log output<br />    [LOG_UPDATE 1]              # Wrap update in script to log output<br />    [LOG_CONFIGURE 1]           # Wrap configure in script to log output<br />    [LOG_BUILD 1]               # Wrap build in script to log output<br />    [LOG_TEST 1]                # Wrap test in script to log output<br />    [LOG_INSTALL 1]             # Wrap install in script to log output<br />   #--Custom targets-------------<br />    [STEP_TARGETS st1 st2 ...]  # Generate custom targets for these steps<br />    )<br /></pre>
    <p>The *_DIR options specify directories for the project, with default directories computed as follows. If the PREFIX option is given to ExternalProject_Add() or the EP_PREFIX directory property is set, then an external project is built and installed under the specified prefix:<br /></p>
<pre>   TMP_DIR      = &lt;prefix&gt;/tmp<br />   STAMP_DIR    = &lt;prefix&gt;/src/&lt;name&gt;-stamp<br />   DOWNLOAD_DIR = &lt;prefix&gt;/src<br />   SOURCE_DIR   = &lt;prefix&gt;/src/&lt;name&gt;<br />   BINARY_DIR   = &lt;prefix&gt;/src/&lt;name&gt;-build<br />   INSTALL_DIR  = &lt;prefix&gt;<br /></pre>
    <p>Otherwise, if the EP_BASE directory property is set then components of an external project are stored under the specified base:<br /></p>
<pre>   TMP_DIR      = &lt;base&gt;/tmp/&lt;name&gt;<br />   STAMP_DIR    = &lt;base&gt;/Stamp/&lt;name&gt;<br />   DOWNLOAD_DIR = &lt;base&gt;/Download/&lt;name&gt;<br />   SOURCE_DIR   = &lt;base&gt;/Source/&lt;name&gt;<br />   BINARY_DIR   = &lt;base&gt;/Build/&lt;name&gt;<br />   INSTALL_DIR  = &lt;base&gt;/Install/&lt;name&gt;<br /></pre>
    <p>If no PREFIX, EP_PREFIX, or EP_BASE is specified then the default is to set PREFIX to "&lt;name&gt;-prefix". Relative paths are interpreted with respect to the build directory corresponding to the source directory in which ExternalProject_Add is invoked.<br /></p>
<p>If SOURCE_DIR is explicitly set to an existing directory the project will be built from it. Otherwise a download step must be specified using one of the DOWNLOAD_COMMAND, CVS_*, SVN_*, or URL options. The URL option may refer locally to a directory or source tarball, or refer to a remote tarball (e.g. <a href="http://.../src.tgz">http://.../src.tgz</a>).<br /></p>
<p>The 'ExternalProject_Add_Step' function adds a custom step to an external project:<br /></p>
<pre>  ExternalProject_Add_Step(&lt;name&gt; &lt;step&gt; # Names of project and custom step<br />    [COMMAND cmd...]        # Command line invoked by this step<br />    [COMMENT "text..."]     # Text printed when step executes<br />    [DEPENDEES steps...]    # Steps on which this step depends<br />    [DEPENDERS steps...]    # Steps that depend on this step<br />    [DEPENDS files...]      # Files on which this step depends<br />    [ALWAYS 1]              # No stamp file, step always runs<br />    [WORKING_DIRECTORY dir] # Working directory for command<br />    [LOG 1]                 # Wrap step in script to log output<br />    )<br /></pre>
    <p>The command line, comment, and working directory of every standard and custom step is processed to replace tokens &lt;SOURCE_DIR&gt;, &lt;BINARY_DIR&gt;, &lt;INSTALL_DIR&gt;, and &lt;TMP_DIR&gt; with corresponding property values.<br /></p>
<p>The 'ExternalProject_Get_Property' function retrieves external project target properties:<br /></p>
<pre>  ExternalProject_Get_Property(&lt;name&gt; [prop1 [prop2 [...]]])<br /></pre>
    <p>It stores property values in variables of the same name. Property names correspond to the keyword argument names of 'ExternalProject_Add'.<br /></p>
<p>The 'ExternalProject_Add_StepTargets' function generates custom targets for the steps listed:<br /></p>
<pre>  ExternalProject_Add_StepTargets(&lt;name&gt; [step1 [step2 [...]]])<br /></pre>
    <p><br /></p>
<p>If STEP_TARGETS is set then ExternalProject_Add_StepTargets is automatically called at the end of matching calls to ExternalProject_Add_Step. Pass STEP_TARGETS explicitly to individual ExternalProject_Add calls, or implicitly to all ExternalProject_Add calls by setting the directory property EP_STEP_TARGETS.<br /></p>
<p>If STEP_TARGETS is not set, clients may still manually call ExternalProject_Add_StepTargets after calling ExternalProject_Add or ExternalProject_Add_Step.<br /></p>
<p>This functionality is provided to make it easy to drive the steps independently of each other by specifying targets on build command lines. For example, you may be submitting to a sub-project based dashboard, where you want to drive the configure portion of the build, then submit to the dashboard, followed by the build portion, followed by tests. If you invoke a custom target that depends on a step halfway through the step dependency chain, then all the previous steps will also run to ensure everything is up to date.<br /></p>
<p>For example, to drive configure, build and test steps independently for each ExternalProject_Add call in your project, write the following line prior to any ExternalProject_Add calls in your CMakeLists file:<br /></p>
<pre>   set_property(DIRECTORY PROPERTY EP_STEP_TARGETS configure build test)<br /></pre>
    
  </li>
</ul>

       Defined in: /Users/Shared/Toolkits/CMake-2.8.6/CMake-2.8.6.app/Contents/share/cmake-2.8/Modules/ExternalProject.cmake
</div></body></html>
